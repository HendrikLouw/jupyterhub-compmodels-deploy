---
- hosts:
  - proxy
  - jupyterhub_nfs
  - jupyterhub_host
  - jupyterhub_nodes
  vars_files:
  - 'secrets.vault.yml'
  - 'vars.yml'
  roles:
  - common
  - rackspace

- hosts:
  - proxy
  - jupyterhub_host
  - jupyterhub_nodes
  vars_files:
  - 'secrets.vault.yml'
  - 'vars.yml'
  roles:
  - docker

- hosts: proxy
  vars_files:
  - 'secrets.vault.yml'
  - 'vars.yml'
  roles:
  - proxy

- hosts: jupyterhub_nfs
  vars_files:
  - 'secrets.vault.yml'
  - 'vars.yml'
  roles:
  - nfs_server

- hosts: nfs_clients
  vars_files:
  - 'secrets.vault.yml'
  - 'vars.yml'
  roles:
  - nfs_client

- hosts: jupyterhub_nodes
  vars_files:
  - 'secrets.vault.yml'
  - 'vars.yml'
  roles:
  - node

- hosts: jupyterhub_host
  vars_files:
  - 'secrets.vault.yml'
  - 'users.vault.yml'
  - 'vars.yml'
  roles:
  - restuser
  - hub
